# 1. Vaihe - M√§√§rittely ja suunnittelu

Projektin tarkoituksena on luoda terveydenhuoltoon sopiva ajanvarausj√§rjestelm√§. J√§rjestelm√§ss√§ tarkoituksena on, ett√§ asiakkaat voivat varata ja hallita aikojaan, sek√§ ammattihenkil√∂ voi n√§hd√§ ja hallita omia aikoja. My√∂s vastaanottovirkailijalla tulee olemaan oikeudet n√§hd√§ ja muokata aikoja.

Lis√§ksi projektissa pyrit√§√§n huomioimaan palvelun k√§ytett√§vyyden tietoturva.

## 1. K√§ytt√§j√§profiilit

**Asiakas, tavallinen k√§ytt√§j√§**
- **Nimi:** Pekka
- **Ik√§:** 35 vuotta
- **Ammatti:** Toimistoty√∂ntekij√§
- **Kuvaus:** Pekka on kiireinen toimistoty√∂ntekij√§, joka arvostaa helppok√§ytt√∂isi√§ ja luotettavia palveluita. H√§n haluaa varata terveyteen liittyvi√§ aikoja nopeasti ja turvallisesti ilman turhaa vaivann√§k√∂√§. Pekka k√§ytt√§√§ usein mobiililaitteita ajanvarausten tekemiseen, mutta toisinaan my√∂s muita laitteita. H√§n odottaa, ett√§ j√§rjestelm√§ toimii saumattomasti kaikilla laitteilla.
- **Tavoitteet ja tarpeet:** 
-- Varata ja hallita varaamiaan aikoja helposti ja nopeasti.
-- Luottaa siihen, ett√§ h√§nen henkil√∂kohtaiset tietonsa ovat turvassa.

**L√§√§k√§ri, ammattihenkil√∂**
- **Nimi:** Emilia
- **Ik√§:** 39 vuotta
- **Ammatti:** Yleisl√§√§k√§ri
- **Kuvaus:** Emilia on kokenut yleisl√§√§k√§ri, joka pit√§√§ vastaanottoaan yksityisell√§ palveluntuottajalla. H√§n tarvitsee tehokkaan tavan hallita potilaidensa ajanvarauksia ja n√§hd√§ oman kalenterinsa, sek√§ klinikkansa varaukset. Emilia arvostaa j√§rjestelm√§n selkeytt√§ ja luotettavuutta, jotta h√§n voi keskitty√§ potilaidensa hoitoon.
- **Tavoitteet ja tarpeet:**
-- Hallita ja tarkastella oman kalenterinsa ajanvarauksia.
-- Hallita ja tarkastella oman klinikkansa ajanvarauksia.
-- Tehd√§, muokata ja peruuttaa ajanvarauksia helposti.

**Vastaanottovirkailija, admin**
- **Nimi:** Niilo
- **Ik√§:** 49 vuotta
- **Ammatti:** Vastaanottovirkailija
- **Kuvaus:**  Niilo ty√∂skentelee klinikan vastaanotossa ja vastaa ajanvarausten hallinnasta sek√§ potilaiden vastaanottamisesta. H√§nell√§ on admin-oikeudet, mik√§ tarkoittaa, ett√§ h√§n voi hallita kaikkia ajanvarauksia ja k√§ytt√§j√§tilej√§. Niilo tarvitsee tehokkaan ja turvallisen j√§rjestelm√§n, joka auttaa h√§nt√§ hoitamaan p√§ivitt√§iset teht√§v√§t sujuvasti.
- **Tavoitteet ja tarpeet:**
-- Hallita ja tarkastella kaikkia ajanvarauksia klinikalla.
-- Tehd√§, muokata ja peruuttaa ajanvarauksia.
-- Hallita k√§ytt√§j√§tilej√§ ja varmistaa, ett√§ kaikki tiedot ovat suojattuja.
-- Seurata ja k√§sitell√§ ep√§ilytt√§v√§t toiminnot j√§rjestelm√§ss√§.


## 2. K√§ytt√∂tapaukset ja -tilanteet

**K√§ytt√∂tilanne 1: K√§ytt√§j√§n kirjautuminen**
- **Kuvaus:** Asiakas, tavallinen k√§ytt√§j√§, haluaa kirjautua ajanvarausj√§rjestelm√§√§n varatakseen ajan l√§√§k√§rille. 

**Vaiheet** 
1. Asiakas avaa kirjautumissivun ja sy√∂tt√§√§ s√§hk√∂postin ja salasanan.
2. J√§rjestelm√§ tarkistaa Annan tunnistetiedot ja my√∂nt√§√§ JWT:n.
3. Asiakas p√§√§see ajanvarausj√§rjestelm√§√§n ja voi tehd√§ varauksen.

**K√§ytt√∂tilanne 2: Ajanvarauksen tekeminen**
- **Kuvaus:** Asiakas haluaa varata ajan L√§√§k√§ri Emilialle. 

**Vaiheet**
1. Asiakas kirjautuu j√§rjestelm√§√§n ja valitsee L√§√§k√§ri Emilian ja sopivan ajan.
2. J√§rjestelm√§ tarkistaa ajan saatavuuden ja Asiakas vahvistaa varauksen.
3. J√§rjestelm√§ tallentaa varauksen ja l√§hett√§√§ vahvistusviestin Asiakkaalle.

**K√§ytt√∂tilanne 3: Ammattihenkil√∂n ajanvarauksen hallinta**
- **Kuvaus:** Ammattihenkil√∂ haluaa tarkastella ja hallita oman kalenterinsa ja klinikkansa ajanvarauksia. 

**Vaiheet**

1. Ammattihenkil√∂ kirjautuu j√§rjestelm√§√§n ja n√§kee omat ja klinikkansa ajanvaraukset.
2. Ammattihenkil√∂ tekee, muokkaa tai peruuttaa ajanvarauksia.
3. J√§rjestelm√§ tallentaa muutokset ja p√§ivitt√§√§ varaukset.

**K√§ytt√∂tilanne 4: Tietojen suojaaminen**
- **Kuvaus:** J√§rjestelm√§ suojaa k√§ytt√§j√§n ja l√§√§k√§rin tiedot hashauksella ja JWT:ll√§. 

**Vaiheet**

1. Asiakkaan ja ammattihenkil√∂n salasanat tallennetaan hashattuina tietokantaan.
2. JWT k√§ytet√§√§n tunnistamiseen ja valtuuttamiseen.
3. J√§rjestelm√§ tarkistaa JWT:n jokaisen pyynn√∂n yhteydess√§.

**K√§ytt√∂tilanne 5: Admin voi hallita ajanvarauksia**
- **Kuvaus:** Vastaanottovirkailija, admin, voi peruuttaa tai siirt√§√§ varauksia j√§rjestelm√§ss√§. 

**Vaiheet**

1. Admin kirjautuu j√§rjestelm√§√§n.
2. Admin tarkastelee kaikkia ajanvarauksia.
3. Admin peruuttaa tai siirt√§√§ varauksia tarvittaessa.
4. J√§rjestelm√§ tallentaa muutokset ja p√§ivitt√§√§ varaukset.

## 3. K√§ytt√∂liittym√§n prototyypit

K√§ytt√∂liittym√§n prototyypit kattavat kaksi keskeist√§ n√§kym√§√§: Kirjautumissivu ja Ajanvaraussivu, joiden toiminnallisuus vaihtelee k√§ytt√§j√§roolin mukaan. Prototyypit on toteutettu piirt√§m√§ll√§ ne paperille.

**Kirjautumissivu**
Kirjautumissivulla k√§ytt√§j√§ sy√∂tt√§√§ s√§hk√∂postiosoitteensa ja salasanansa. Ulkoasu on yksinkertainen ja se ohjaa k√§ytt√§j√§√§ tehokkaasti. 
K√§yt√∂ss√§ on seuraavat elementit:

- Valintapainike, sille onko sis√§√§nkirjautuja asiakas, ammattihenkil√∂ vai admin.

- Sy√∂tekent√§t s√§hk√∂postille ja salasanalle, joissa on selke√§t paikkamerkit (placeholder-tekstit) ja virheilmoitukset v√§√§r√§n sy√∂tteen yhteydess√§.

- "Kirjaudu sis√§√§n" -painike.

Kun k√§ytt√§j√§ kirjautuu sis√§√§n, j√§rjestelm√§ tarkistaa tunnistetiedot JWT-autentikoinnilla ja ohjaa k√§ytt√§j√§n h√§nen roolinsa mukaiseen n√§kym√§√§n.

**Kirjautumissivun proto**

!Kuvaus D:\Markku\IT\2.Vuosi\Web kehitt√§misen jatkokurssi\Loppuprojekti\Kirjautumissivu.jpg


**Ajanvaraussivu**
Ajanvaraussivulla k√§ytt√§j√§ voi hallita ajanvarauksiaan. K√§ytt√∂liittym√§ mukautuu k√§ytt√§j√§roolin perusteella:

üîπ Tavallinen k√§ytt√§j√§

N√§kee vain omat ajanvarauksensa selke√§ss√§ kalenterin√§kym√§ss√§ (React-datepicker).

Voi varata uuden ajan valitsemalla vapaan ajan ja vahvistamalla varauksen.

Voi perua varauksensa, jolloin j√§rjestelm√§ p√§ivitt√§√§ tilanteen reaaliaikaisesti.

üîπ Ammattihenkil√∂

N√§kee oman aikataulunsa sek√§ vastaanottoklinikan aikataulun (listan√§kym√§ + kalenteri).

Voi muokata ja perua potilasvarauksia, jos aikataulu muuttuu.

Voi lis√§t√§ uusia aikoja, jos vastaanottop√§iviin tulee muutoksia.

üîπ Admin

N√§kee ja hallitsee kaikkia varauksia ja k√§ytt√§ji√§.

Voi lis√§t√§, muokata ja poistaa ajanvarauksia tarpeen mukaan.

Voi hallitse k√§ytt√§j√§tilej√§ (esim. est√§√§ k√§ytt√§j√§n tai palauttaa unohtuneen tilin).

Visuaalinen suunnittelu ja saavutettavuus
K√§ytt√∂liittym√§n v√§rimaailma ja typografia on valittu siten, ett√§ se on kontrastiltaan selke√§ ja saavutettava (WCAG 2.1 -standardit).

Painikkeet ja navigaatioelementit ovat riitt√§v√§n suuria mobiilik√§ytt√§jille.

Reaaliaikaiset ilmoitukset (esim. "Varaus onnistui!" tai "Peruutus tallennettu") antavat palautetta k√§ytt√§j√§lle.

Dokumentointi ja testaus
Prototyypit on dokumentoitu ja jaettu projektiryhm√§n ja testaajien tarkasteltaviksi.

K√§ytett√§vyystesteiss√§ varmistetaan, ett√§ navigointi ja vuorovaikutukset ovat loogisia ja sujuvia.

Palautteen perusteella tehd√§√§n tarvittavia muutoksia ennen kehitysvaiheen aloittamista.

## 4. Tietoarkkitehtuuri ja tekninen suunnittelu

**Projektin rakenne ja komponentit**
Projektissa on kolme p√§√§komponenttia, jotka yhdess√§ muodostavat ajanvarausj√§rjestelm√§n. J√§rjestelm√§ koostuu frontend- ja backend-osista sek√§ tietokannan rakenteesta. Kaikki j√§rjestelm√§n osat on sijoitettu Azure-pilvipalveluun, mik√§ takaa j√§rjestelm√§n skaalautuvuuden ja luotettavuuden.

**Frontend (React)**
Frontendin pohjana k√§ytet√§√§n React-kirjastoa, joka mahdollistaa komponenttipohjaisen arkkitehtuurin. Tavoitteena on luoda k√§ytt√§j√§yst√§v√§llinen ja responsiivinen k√§ytt√∂liittym√§, jossa on selke√§ navigointi ja sujuva vuorovaikutus. Kalenterin√§kym√§ toteutetaan React-datepicker-kirjastolla, joka mahdollistaa p√§iv√§m√§√§r√§n ja ajan valinnan. React Router:ia k√§ytet√§√§n eri sivujen navigointiin, kuten kirjautumissivulle ja kalenterisivulle.

**Backend (Node.js + Express)**
Backendin teknologiana k√§ytet√§√§n Node.js:√§√§ ja Express-kehyst√§, joka tarjoaa skaalautuvan ja nopean palvelinratkaisun. Node.js:n avulla pystyt√§√§n k√§sittelem√§√§n HTTP-pyynn√∂t ja tarjoamaan API:t frontendille, kuten kirjautumisen ja ajanvarauksen hallinnan. JWT (JSON Web Token) -tunnistus k√§ytet√§√§n k√§ytt√§j√§n autentikointiin ja valtuuttamiseen. API-pyynn√∂t tarkistavat JWT:n validiteetin ennen kuin ne palauttavat tietoja k√§ytt√§j√§lle.

**Tietokanta (PostgreSQL)**
J√§rjestelm√§ss√§ k√§ytet√§√§n PostgreSQL-tietokantaa. Tietokanta tallentaa k√§ytt√§jien tiedot (mm. nimi, s√§hk√∂postiosoite, salasana) ja ajanvaraukset (p√§iv√§m√§√§r√§, kellonaika, k√§ytt√§j√§). Tietokannan rakenteet on suunniteltu siten, ett√§ ne tukevat tehokasta hakua ja varauksen hallintaa. K√§ytt√§jien salasanat tallennetaan bcrypt-algoritmilla hashattuina, mik√§ takaa tietoturvan.

**Tietoturva**
J√§rjestelm√§ss√§ k√§ytet√§√§n tietoturvatoimenpiteit√§. K√§ytt√§jien salasanat hashataan ja tallennetaan tietokantaan, jolloin ne eiv√§t ole koskaan selkokielisin√§ saatavilla. JWT (JSON Web Token) -autentikointi mahdollistaa turvallisen k√§ytt√§j√§n tunnistamisen ja valtuuttamisen. JWT:t√§ k√§ytet√§√§n kaikissa API-pyynn√∂iss√§ varmistamaan, ett√§ vain kirjautuneet ja valtuutetut k√§ytt√§j√§t voivat k√§ytt√§√§ j√§rjestelm√§√§.

**J√§rjestelm√§n skaalautuvuus ja yll√§pidett√§vyys**
J√§rjestelm√§n skaalautuvuus ja yll√§pidett√§vyys on huomioitu koko arkkitehtuurissa. Frontend ja backend on erotettu toisistaan, mik√§ mahdollistaa molempien osien kehitt√§misen ja skaalaamisen erikseen. Docker-s√§il√∂jen k√§ytt√∂ mahdollistaa sovelluksen siirt√§misen eri ymp√§rist√∂ihin helposti. J√§rjestelm√§ toimii Azure-pilvipalvelussa, joka tarjoaa tarvittavat resurssit ja skaalautuvuuden. Tietokannan hallinta on j√§rjestetty niin, ett√§ mahdollinen laajentaminen uusilla ominaisuuksilla on vaivatonta.

**K√§ytetyt teknologiat**
- **Frontend:** React, React Router, React-datepicker

- **Backend:** Node.js, Express

- **Tietokanta:** PostgreSQL

- **Autentikointi:** JWT (JSON Web Token)

- **Salasanan hash√§ys:** bcrypt

- **Pilvipalvelu:** Azure

**Projektin tekninen suunnittelu ja arkkitehtuuri**
Projektin tietorakenne on suunniteltu niin, ett√§ kaikki t√§rkeimm√§t toiminnot on jaettu selkeisiin osiin. Backendin ja frontendin v√§linen rajapinta toteutetaan RESTful-tyylill√§, mik√§ takaa yksinkertaisen ja laajennettavan arkkitehtuurin. Tietokannan taulut ja niiden suhteet on suunniteltu optimoidusti, jotta varauksia voidaan k√§sitell√§ nopeasti ja tehokkaasti. SQL-kyselyt on optimoitu hakemaan ja muokkaamaan tietoja mahdollisimman tehokkaasti.

## 5. Projektinhallinta ja k√§ytt√§j√§testaus

**Projektinhallinta**
Projektin hallinta perustuu ketter√§√§n Scrum-menetelm√§√§n, jossa ty√∂skennell√§√§n iteratiivisesti ja reagoidaan tarvittaessa muutoksiin. Projektin aikaraja on noin 1 kuukausi, ja sen aikana on sovittu selke√§t v√§litavoitteet ja arvioinnit, joiden perusteella seurataan edistymist√§.

**Projektin vaiheet ja aikaraja:**

1. **M√§√§rittely ja suunnittelu (viikko 1):** Projektin alussa m√§√§ritell√§√§n tarkasti projektin tavoitteet ja tekniset vaatimukset. K√§ytt√∂tapaukset, tekninen suunnitelma, arkkitehtuuri ja k√§ytt√∂liittym√§n prototyypit. Samalla varmistetaan, ett√§ projektissa k√§ytett√§v√§t teknologiat (React, Node.js, PostgreSQL, JWT) ovat m√§√§ritelty.

2. **Perusrunko ja p√§√§toiminnallisuudet (viikko 2-3):** T√§ll√§ aikav√§lill√§ rakennetaan perusrunko Reactin avulla ja luodaan taustaj√§rjestelm√§ Node.js/Express -ymp√§rist√∂ss√§. Koodin laatu ja dokumentointi ovat keski√∂ss√§. K√§ytt√§jien autentikointi toteutetaan JWT:ll√§, ja k√§ytt√§j√§rekister√∂inti ja kirjautuminen ovat ensimm√§isi√§ toiminnallisuuksia, joita aletaan kehitt√§m√§√§n.

3. **Testaus ja virheenk√§sittely (viikko 4):** Testaus keskittyy sovelluksen eri osien toimivuuteen, erityisesti varausj√§rjestelm√§n osalta. K√§ytt√§jien kirjaaminen ja varauksen hallinta ovat keski√∂ss√§. Virheenk√§sittelymekanismit rakennetaan siten, ett√§ virheilmoitukset ovat selkeit√§ ja auttavat loppuk√§ytt√§ji√§ korjaamaan mahdolliset virheet.

**Aikataulun seuranta ja muutokset:** Aikataulun ja ty√∂teht√§vien hallintaa varten k√§ytet√§√§n yksinkertaista lokikirjaa, johon merkitaan p√§iv√§, k√§ytetty aika ja tehdyt teht√§v√§t. Tavoitteena on pit√§√§ kiinni aikarajoista ja reagoida joustavasti mahdollisiin esteisiin. 

**K√§ytt√§j√§testaus**
K√§ytt√§j√§testaus toteutetaan iteratiivisesti kehityksen eri vaiheissa, ja se perustuu aitoihin k√§ytt√§jiin ja heid√§n vuorovaikutukseensa j√§rjestelm√§n kanssa.

Testausjaksoissa keskityt√§√§n erityisesti k√§ytt√∂liittym√§n ja toiminnallisuuksien testaukseen. Testauksessa otetaan huomioon eri k√§ytt√§j√§persoonat ja heid√§n tarpeensa, kuten esimerkiksi ajanvarausten tekeminen ja tarkasteleminen sek√§ muokkaaminen.

**Testit suoritetaan seuraavasti:**

- **Alustavat testit:** Suoritetaan prototyypill√§ ja yksinkertaisella k√§ytt√∂liittym√§ll√§ jonka avulla voidaan testata perustoiminnallisuudet ja k√§ytett√§vyys.

- **Funktionaaliset testit:** Testataan j√§rjestelm√§n eri toimintoja, kuten kirjautumista, ajanvarausten tekemist√§ ja peruutuksia.
- **Testausskenaariot:**
1. Kirjautuminen j√§jestelm√§√§n asiakkaan tunnuksilla ja ajan varaaminen
2. Kirjautuminen j√§rjestelm√§√§n ammattihenkil√∂n tunnuksilla ja omien aikojen muokkaaminen
3. Kirjautuminen j√§rjestelm√§√§n admin tunnuksilla ja aikojen muokkaaminen

- **E2E-testit (End-to-End):** Koko j√§rjestelm√§n toimivuus testataan eri skenaarioilla, jolloin varmistetaan, ett√§ kaikki toiminnot ja komponentit toimivat yhteen sujuvasti.

- **Kuormitustestaus:** Testataan j√§rjestelm√§n kyky k√§sitell√§ useita samanaikaisia k√§ytt√§ji√§ ja varmistetaan, ett√§ palvelin pystyy k√§sittelem√§√§n kuormitusta ilman merkitt√§vi√§ viiveit√§.

**Testauksien tulosten mittarit:**
- Ajan mittaaminen testiskenaarioiden toteuttamisessa
- Virheilmoitukset esimerkiksi E2E-testauksessa
- K√§ytt√§j√§testaajien kommentit